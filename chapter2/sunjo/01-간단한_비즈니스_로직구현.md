> 비즈니스 로직 코드를 모델링하고 구현하는 다양한 방법
>

### 트랜잭션 스크립트

**정의**

- 트랜잭션 스크립트 패턴은 프로시저를 기반으로 시스템의 비즈니스 로직을 구성하며 각 프로시저는 퍼블릭 인터페이스를 통해 시스템 사용자가 실행하는 작업을 구현( 약간 파사드 패턴같다.)
    - 각 작업은 성공하거나 실패할 수 있지만 유효하지 않은 상태를 만들면 안된다.

**트랜잭션 동작 구현 실패**

전체를 아우르는 트랜잭션 없이 여러 업데이트를 하는 경우

- Void aaFacade() { 함수1(); 함수2() }
- @Transaction 함수1() {}

분산 트랜잭션에서 통합할 수 없는 여러 개의 저장 장치로 작업(약간 msa에서 트랜잭션을 한번에 할 수 없는 경우)

- 분산 시스템: 데이터 변경 -> 메세지 발행 -> 다른 컴포넌트에 알림

**암시적 분산 트랜잭션**

- 작업을 멱등성으로 만들기
    - 함수 파라미터에 특정 값을 넘겨서 처리하기 (?)
- 낙관적 동시성 제어
    - 매개변수로 특정 값을 넘겨서 처음 읽은 값과 동일한 경우에만 카운터 값을 업데이트

**트랜잭션 스크립트를 사용하는 경우**

- 일반 모놀로직 같은 느낌(?)
- 간단한 도메인에 효과적
- 단순한 지원 하위 도메인에 적합

### 액티브 레코드

**정의**

- 데이터베이스 접근을 캡슐화하고 해당 데이터 도메인 로직을 추가하는 오브젝트
- 약간 무엇을 거쳐서 접근함(프록시?)

**액티브 레코드 사용하는 경우**

- 단순한 경우 사용
- 복잡한 자료구조에서도 작동 가능
- 액티브 레코드라는 전용 객체를 사용하여 표현
    - ORM과 관련이 있음
- 캡슐화 - 유효성 검사 및 데이터 조작을 한다.
- 지원 하위 도메인. 일반 하위 도메인

### 연습문제
1. C
2. D
3. Ticket data validate
4. 근무일정, 제품